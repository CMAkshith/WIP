name: Build APK
on: [push, workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: Build APK
        run: |
          # Install the tool
          npm install -g @bubblewrap/cli
          
          # This command creates the project silently
          # It uses your manifest.json and the icon you just got
          yes | bubblewrap init --manifest=./manifest.json --directory=./build/
          
          # This builds the actual APK file
          cd build && yes | bubblewrap build --skipSigning

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          name: PenguinGame-APK
          path: build/*.apk
